<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
		<!-- Google Chrome Frame也可以让IE用上Chrome的引擎: -->
		<meta name="renderer" content="webkit">
		<!--国产浏览器高速模式-->
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="穷在闹市" />
		<!-- 作者 -->
		<meta name="revised" content="穷在闹市.v3, 2019/05/01" />
		<!-- 定义页面的最新版本 -->
		<meta name="description" content="网站简介" />
		<!-- 网站简介 -->
		<meta name="keywords" content="搜索关键字，以半角英文逗号隔开" />
		<title>穷在闹市出品</title>

		<!-- 公共样式 开始 -->
		<link rel="stylesheet" type="text/css" href="../../css/base.css">
		<link rel="stylesheet" type="text/css" href="../../css/iconfont.css">
		<script type="text/javascript" src="../../framework/jquery-1.11.3.min.js"></script>
		<link rel="stylesheet" type="text/css" href="../../layui/css/layui.css">
		<script type="text/javascript" src="../../layui/layui.js"></script>
		<!-- 滚动条插件 -->
		<link rel="stylesheet" type="text/css" href="../../css/jquery.mCustomScrollbar.css">
		<script src="../../framework/jquery-ui-1.10.4.min.js"></script>
		<script src="../../framework/jquery.mousewheel.min.js"></script>
		<script src="../../framework/jquery.mCustomScrollbar.min.js"></script>
		<script src="../../framework/cframe.js"></script>
		<!-- 仅供所有子页面使用 -->
		<!-- 公共样式 结束 -->
		<script src="../../js/out_intoData.js"></script>
		<style>
			.searchResult {
				position: absolute;
				top: 50px;
				left: 15px;
				z-index: 10;
				background-color: #FFF;
				width: 100px;
				border: 1px solid #d2d2d2;
				border-radius: 2px;
			}
			
			.searchResult li {
				padding: 0 10px;
				line-height: 36px;
				white-space: nowrap;
				overflow: hidden;
				text-overflow: ellipsis;
				cursor: pointer;
			}
			
			.searchResult li:hover {
				background-color: #eee;
			}
		</style>
	</head>

	<body>
		<div class="cBody">
			<div class="console">
				<div class="layui-form-item">
					<a class="layui-btn" onclick="addbasicInfo('basicInfo')">新增</a>
					<a class="layui-btn" onclick="addbasicInfo('basicInfo')">复制</a>
					<a class="layui-btn" onclick="addbasicInfo('basicInfo')">提交</a>
					<a class="layui-btn" onclick="printTable('dayindaju1')">打印</a>
					<a class="layui-btn" onclick="addbasicInfo('basicInfo')">导出</a>
					<a class="layui-btn" onclick="addbasicInfo('basicInfo')">附件</a>
					<a class="layui-btn" onclick="addbasicInfo('basicInfo')">提醒</a>
					<a class="layui-btn" onclick="delbasicInfo(this)">删除</a>
					<a class="layui-btn" onclick="addbasicInfo('basicInfo')">关闭</a>
				</div>
			</div>
			<div class="layui-tab" lay-filter="myPage">
				<ul class="layui-tab-title">
					<li class="layui-this" lay-id="historyList">基本信息</li>
					<li lay-id="todayList">流程信息</li>
					<li lay-id="todayList">流程信息</li>
				</ul>
				<div class="layui-tab-content">
					<div class="layui-tab-item layui-show">
						<table id="basicInfo" class="layui-table">
							<thead>
								<tr>
									<th>行号</th>
									<th>物料分类编码</th>
									<th>物料分类名称</th>
									<th>物料编码</th>
									<th>物料名称</th>
									<th>规格</th>
									<th>型号</th>
									<th>单位</th>
									<th>需求数量</th>
									<th>需求月份</th>
									<th>需求日期</th>
									<th>货源是否确定</th>
									<th>期望供应商</th>
									<th>固定供应商</th>
									<th>备注</th>
									<th>物料追踪码</th>
								</tr>
							</thead>
						</table>
					</div>
					<div class="layui-tab-item">
						<table id = "process_Info" class="layui-table">
							<thead>
								<tr>
									<thead>
										<th>行号</th>
										<th>审批人</th>
										<th>审批时间</th>
										<th>审批意见</th>
										<th>说明</th>
									</thead>
								</tr>
							</thead>
						</table>
					</div>
				</div>
			</div>
		</div>
		<script>
			//根据2018.03.01日 张家港客户需求改版的要求，在新的后台框架中提供以下功能
			//此功能只适用与提前加载后，进行搜索；

			//新增
			function addbasicInfo(id) {
				var str = '<tr>' +
					'<td>' +
					'<input type="date" name="phone" lay-verify="required" autocomplete="off" class="layui-input" onkeyup="seachKeyup(this)">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'</tr>';
				$("#" + id).append(str);

				//重新初始化Iframe的高度
				cframeInit();
			}
			//新增
			function addbasic(id) {
				var str = '<tr>' +
					'<td>' +
					'<input type="date" name="phone" lay-verify="required" autocomplete="off" class="layui-input" onkeyup="seachKeyup(this)">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'<td>' +
					'<input type="tel" name="phone" lay-verify="required" autocomplete="off" class="layui-input">' +
					'</td>' +
					'</tr>';
				$("#" + id).append(str);

				//重新初始化Iframe的高度
				cframeInit();
			}
			//搜索按钮弹起
			function seachKeyup(_this) {
				var w = $(_this).width() + 10;
				$(_this).siblings().remove();

				var str = '<ul class="searchResult" style="width: ' + w + 'px">' +
					'<li onclick="seachChoose(this)">测试11</li>' +
					'<li onclick="seachChoose(this)">测试11</li>' +
					'<li onclick="seachChoose(this)">测试11</li>' +
					'<li onclick="seachChoose(this)">测试11</li>' +
					'</ul>';
				$(_this).after(str);

				//点击其他地方搜索下拉框消失
				$(document).click(function() {
					$(".searchResult").remove();
				});

				//点击input也消失
				$(_this).click(function() {
					$(".searchResult").remove();
				});
			}
			//搜索下拉选项选中
			function seachChoose(_this) {
				$(_this).parent().siblings("input").val($(_this).text());
			}

			//删除
			function delbasicInfo(_this) {
				layui.use(['form', 'laydate'], function() {
					layer.confirm('确定要删除么？', {
						btn: ['确定', '取消'] //按钮
					}, function() {
						$(_this).parent().parent().remove();
						layer.msg('删除成功', {
							icon: 1
						});
					}, function() {
						layer.msg('取消删除', {
							time: 2000 //20s后自动关闭
						});
					});
				});
			}
			layui.use('element', function() {
				var element = layui.element;

				//获取hash来切换选项卡，假设当前地址的hash为lay-id对应的值
				var layid = location.hash.replace(/^#test1=/, '');
				element.tabChange('myPage', layid); //假设当前地址为：http://a.com#test1=222，那么选项卡会自动切换到“发送消息”这一项

				//监听Tab切换，以改变地址hash值
				element.on('tab(myPage)', function() {
					location.hash = 'test1=' + this.getAttribute('lay-id');
					console.log(this.getAttribute('lay-id'));
				});
			});
		</script>
	</body>

</html>